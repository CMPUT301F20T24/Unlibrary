<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_242-release) on Sun Nov 29 22:28:02 MST 2020 -->
<title>ExchangeRepository</title>
<meta name="date" content="2020-11-29">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="ExchangeRepository";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../com/example/unlibrary/exchange/ExchangeFragment.html" title="class in com.example.unlibrary.exchange"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../com/example/unlibrary/exchange/ExchangeViewModel.html" title="class in com.example.unlibrary.exchange"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/example/unlibrary/exchange/ExchangeRepository.html" target="_top">Frames</a></li>
<li><a href="ExchangeRepository.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.example.unlibrary.exchange</div>
<h2 title="Class ExchangeRepository" class="title">Class ExchangeRepository</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>com.example.unlibrary.exchange.ExchangeRepository</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">ExchangeRepository</span>
extends java.lang.Object</pre>
<div class="block">Manages all the database interaction for the ExchangeViewModel.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../com/example/unlibrary/exchange/ExchangeRepository.html#ExchangeRepository-com.google.firebase.firestore.FirebaseFirestore-com.algolia.search.saas.Client-">ExchangeRepository</a></span>(com.google.firebase.firestore.FirebaseFirestore&nbsp;db,
                  com.algolia.search.saas.Client&nbsp;algoliaClient)</code>
<div class="block">Constructor for the Exchange Repository.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/example/unlibrary/exchange/ExchangeRepository.html#attachListener--">attachListener</a></span>()</code>
<div class="block">Attach a listener to a QuerySnapshot from Firestore.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/example/unlibrary/exchange/ExchangeRepository.html#detachListener--">detachListener</a></span>()</code>
<div class="block">Removes snapshot listeners.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/example/unlibrary/exchange/ExchangeRepository.html#fetchCurrentRequest-com.example.unlibrary.models.Book-">fetchCurrentRequest</a></span>(<a href="../../../../com/example/unlibrary/models/Book.html" title="class in com.example.unlibrary.models">Book</a>&nbsp;book)</code>
<div class="block">Fetch the request associated with the current book.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/example/unlibrary/exchange/ExchangeRepository.html#fetchOwnerForCurrentBook-java.lang.String-">fetchOwnerForCurrentBook</a></span>(java.lang.String&nbsp;currentBookOwnerID)</code>
<div class="block">Fetches the owner for a newly selected book by clearing the previous book's owner information and
 adding a snapshot listener for the book's owner</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>androidx.lifecycle.LiveData&lt;java.util.List&lt;<a href="../../../../com/example/unlibrary/models/Book.html" title="class in com.example.unlibrary.models">Book</a>&gt;&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/example/unlibrary/exchange/ExchangeRepository.html#getBooks--">getBooks</a></span>()</code>
<div class="block">Gets the observable list of books that are available to be requested for.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>androidx.lifecycle.LiveData&lt;<a href="../../../../com/example/unlibrary/models/Request.html" title="class in com.example.unlibrary.models">Request</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/example/unlibrary/exchange/ExchangeRepository.html#getCurrentRequest--">getCurrentRequest</a></span>()</code>
<div class="block">Get the request associated with the current book.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>androidx.lifecycle.LiveData&lt;<a href="../../../../com/example/unlibrary/models/User.html" title="class in com.example.unlibrary.models">User</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/example/unlibrary/exchange/ExchangeRepository.html#getOwner--">getOwner</a></span>()</code>
<div class="block">Getter for the owner of the book.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/example/unlibrary/exchange/ExchangeRepository.html#getUid--">getUid</a></span>()</code>
<div class="block">Returns id of currently logged on user.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/example/unlibrary/exchange/ExchangeRepository.html#search-java.lang.String-">search</a></span>(java.lang.String&nbsp;keywords)</code>
<div class="block">Perform full search in title and author using Algolia.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/example/unlibrary/exchange/ExchangeRepository.html#sendRequest-com.example.unlibrary.models.Request-com.example.unlibrary.models.Book-com.google.android.gms.tasks.OnSuccessListener-com.google.android.gms.tasks.OnFailureListener-">sendRequest</a></span>(<a href="../../../../com/example/unlibrary/models/Request.html" title="class in com.example.unlibrary.models">Request</a>&nbsp;request,
           <a href="../../../../com/example/unlibrary/models/Book.html" title="class in com.example.unlibrary.models">Book</a>&nbsp;book,
           com.google.android.gms.tasks.OnSuccessListener&lt;java.lang.Void&gt;&nbsp;onSuccessListener,
           com.google.android.gms.tasks.OnFailureListener&nbsp;onFailureListener)</code>
<div class="block">Request a book.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="ExchangeRepository-com.google.firebase.firestore.FirebaseFirestore-com.algolia.search.saas.Client-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>ExchangeRepository</h4>
<pre>@Inject
public&nbsp;ExchangeRepository(com.google.firebase.firestore.FirebaseFirestore&nbsp;db,
                                  com.algolia.search.saas.Client&nbsp;algoliaClient)</pre>
<div class="block">Constructor for the Exchange Repository.</div>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getUid--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getUid</h4>
<pre>public&nbsp;java.lang.String&nbsp;getUid()</pre>
<div class="block">Returns id of currently logged on user.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>unique identifier of user</dd>
</dl>
</li>
</ul>
<a name="attachListener--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>attachListener</h4>
<pre>public&nbsp;void&nbsp;attachListener()</pre>
<div class="block">Attach a listener to a QuerySnapshot from Firestore. Listens to any changes in the database
 and updates books object</div>
</li>
</ul>
<a name="getBooks--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBooks</h4>
<pre>public&nbsp;androidx.lifecycle.LiveData&lt;java.util.List&lt;<a href="../../../../com/example/unlibrary/models/Book.html" title="class in com.example.unlibrary.models">Book</a>&gt;&gt;&nbsp;getBooks()</pre>
<div class="block">Gets the observable list of books that are available to be requested for. This includes all
 books that are not currently being borrowed or has been accepted. Status is always set to
 AVAILABLE.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>observable list of requestable books</dd>
</dl>
</li>
</ul>
<a name="detachListener--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>detachListener</h4>
<pre>public&nbsp;void&nbsp;detachListener()</pre>
<div class="block">Removes snapshot listeners. Should be called just before the owning ViewModel is destroyed.</div>
</li>
</ul>
<a name="search-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>search</h4>
<pre>public&nbsp;void&nbsp;search(java.lang.String&nbsp;keywords)</pre>
<div class="block">Perform full search in title and author using Algolia. Full book details is fetched from
 Firestore. Updates list of books at the end.
 <p>
 TODO: Decide what to do when keywords is empty and what happens when someone adds a new book (go with listener above or do re-search)</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>keywords</code> - space separated words to search for</dd>
</dl>
</li>
</ul>
<a name="getOwner--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getOwner</h4>
<pre>public&nbsp;androidx.lifecycle.LiveData&lt;<a href="../../../../com/example/unlibrary/models/User.html" title="class in com.example.unlibrary.models">User</a>&gt;&nbsp;getOwner()</pre>
<div class="block">Getter for the owner of the book.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>LiveData<ArrayList < String>> This returns the books object.</dd>
</dl>
</li>
</ul>
<a name="fetchOwnerForCurrentBook-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fetchOwnerForCurrentBook</h4>
<pre>public&nbsp;void&nbsp;fetchOwnerForCurrentBook(java.lang.String&nbsp;currentBookOwnerID)</pre>
<div class="block">Fetches the owner for a newly selected book by clearing the previous book's owner information and
 adding a snapshot listener for the book's owner</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>currentBookOwnerID</code> - </dd>
</dl>
</li>
</ul>
<a name="getCurrentRequest--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCurrentRequest</h4>
<pre>public&nbsp;androidx.lifecycle.LiveData&lt;<a href="../../../../com/example/unlibrary/models/Request.html" title="class in com.example.unlibrary.models">Request</a>&gt;&nbsp;getCurrentRequest()</pre>
<div class="block">Get the request associated with the current book.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>request</dd>
</dl>
</li>
</ul>
<a name="fetchCurrentRequest-com.example.unlibrary.models.Book-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fetchCurrentRequest</h4>
<pre>public&nbsp;void&nbsp;fetchCurrentRequest(<a href="../../../../com/example/unlibrary/models/Book.html" title="class in com.example.unlibrary.models">Book</a>&nbsp;book)</pre>
<div class="block">Fetch the request associated with the current book.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>book</code> - current book</dd>
</dl>
</li>
</ul>
<a name="sendRequest-com.example.unlibrary.models.Request-com.example.unlibrary.models.Book-com.google.android.gms.tasks.OnSuccessListener-com.google.android.gms.tasks.OnFailureListener-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>sendRequest</h4>
<pre>public&nbsp;void&nbsp;sendRequest(<a href="../../../../com/example/unlibrary/models/Request.html" title="class in com.example.unlibrary.models">Request</a>&nbsp;request,
                        <a href="../../../../com/example/unlibrary/models/Book.html" title="class in com.example.unlibrary.models">Book</a>&nbsp;book,
                        com.google.android.gms.tasks.OnSuccessListener&lt;java.lang.Void&gt;&nbsp;onSuccessListener,
                        com.google.android.gms.tasks.OnFailureListener&nbsp;onFailureListener)</pre>
<div class="block">Request a book.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>request</code> - request to be created</dd>
<dd><code>book</code> - book to associate request with</dd>
<dd><code>onSuccessListener</code> - code to call on success</dd>
<dd><code>onFailureListener</code> - code to call on failure</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../com/example/unlibrary/exchange/ExchangeFragment.html" title="class in com.example.unlibrary.exchange"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../com/example/unlibrary/exchange/ExchangeViewModel.html" title="class in com.example.unlibrary.exchange"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/example/unlibrary/exchange/ExchangeRepository.html" target="_top">Frames</a></li>
<li><a href="ExchangeRepository.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
