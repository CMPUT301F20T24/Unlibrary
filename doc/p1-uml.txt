@startuml
package Firestore {
}

class User {
    -int id
    -string name
    -string username
    -string phone
    -timestamp createdAt
    +void setId(int id)
    +void setName(string name)
    +void setUsername (string username)
    +void setPhone(string name)
    +void setCreatedAt (timestamp createdAt)
    +int getId()
    +string gettName()
    +string getUsername ()
    +string getPhone()
    +timestamp getCreatedAt ()
}

class Book {
    -int id
    -string title
    -string author
    -string isbn
    -string status
    -Image photo
    -User owner
    -timestamp createdAt
    +void setId(int id)
    +void setTitle(string title)
    +void setAuthor (string author)
    +void setIsbn (string isbn)
    +void setStatus(string status)
    +void setPhoto(Image photo)
    +void setOwner (User owner)
    +void setCreatedAt(timestamp createdAt)
    +int getId ()
    +string getTitle ()
    +string getAuthor ()
    +string getIsbn ()
    +string getStatus ()
    +Image getPhoto ()
    +User getOwner ()
    +timestamp getCreatedAt()
 }

 class Request {
    -int id
    -User requester
    -Book book
    -string state
    -geopoint location
    -timestamp createdAt
    +void setId(int id)
    +void setRequester(User requester)
    +void setBook(Book book)
    +void setState(string state)
    +void setLocation (geopoint location)
    +void setCreatedAt (timestamp createdAt)
    +int getId()
    +User getRequester()
    +Book getBook()
    +string getState()
    +geopoint getLocation()
    +timestamp getCreatedAt()
 }

class LoginActivity {
#void onCreate()
}

class LoginViewModel {
-LoginRepository loginRepository
+LoginViewModel(LoginRepository loginRepository)
}

class LoginRepository {
-FirebaseFirestore  loginRepository
+LiveData<User> getUserData()
+void createUser()
}
class ExchangeActivity{
#void onCreate()
-bookRequest()
}

class ExchangeViewModel{
-ExchangeRepository exchangeRepository
+ExchangeViewModel(ExchangeRepository exchangeRepository)
}

class ExchangeRepository{
-FirebaseFirestore  exchangeRepository
- LiveData<ArrayList<Request>> requestData
+LiveData<ArrayList<Request>> getStoreExchangeData()
+LiveData<ArrayList<Request>> getExchangeData()
+void updateExchangeData()
}

class ProfileActivity {
#void onCreate()
}

class ProfileViewModel {
-ProfileRepository profileRepository
+ProfileViewModel(ProfileRepository profileRepository)
}

class ProfileRepository {
-FirebaseFirestore  profileRepository
-LiveData<User> userData
+LiveData<User> getStoreProfileData()
+LiveData<User> getProfileData()
+void updateProfile(User profile)
}

class LibraryActivity {
- LibraryViewModel mViewModel
#void onCreate()
}

class LibraryViewModel {
-LibraryRepository libraryRepository
+LibraryViewModel(LibraryRepository libraryRepository)
}

class LibraryRepository {
-FirebaseFirestore  LibraryRepository
-LiveData<ArrayList<Book>> booksData
+LiveData<ArrayList<Book>> getStoreLibraryData()
+LiveData<ArrayList<Book>> getLibraryData()
+void updateLibrary(Book book)
}

class GoogleMapsFragment{
- GoogleMapAddress mMeetingLocation
}

class GoogleMapService {
}

class BookFragment {
- BookFragmentViewModel mViewModel
}

class CameraService {
}

class ProfileFragment{
- ProfileViewModel mViewModel
}

class HandOffService {
}

class BookFragmentViewModel {
- Book mOpenedBook
- Boolean isEditing
+ void setTitle(String title)
+ void setDescription(String description)
+ void setISBN(String ISBN)
- ArrayList<User> mRequests
+ void takePictures()
}

class ProfileFragmentViewModel {
- User mProfile
+ void sendApproval()
+ void sendDecline()
}

class BookRequestService {
+ Boolean isAccepted
}

ProfileActivity o-- ProfileViewModel
ProfileViewModel o-- ProfileRepository

BookFragment o-- HandOffService
BookFragment o-- GoogleMapsFragment : On Select or Edit Meeting Location
BookFragment o-- BookFragmentViewModel
BookFragment o-- CameraService
BookFragmentViewModel --> LibraryViewModel
LibraryViewModel o-- LibraryRepository
LibraryActivity o-- BookFragment
LibraryActivity o-- LibraryViewModel
LibraryActivity o-- ProfileFragment
GoogleMapsFragment o-- GoogleMapService
ProfileFragment o-- ProfileFragmentViewModel
ProfileFragmentViewModel --> LibraryViewModel
ProfileFragment o-- BookRequestService

ExchangeViewModel --o ExchangeActivity 
ExchangeRepository --o ExchangeViewModel  
BookFragment --o ExchangeActivity 
LoginActivity o-- LoginViewModel
LoginViewModel o-- LoginRepository

ProfileRepository --> Firestore
LibraryRepository --> Firestore
ExchangeRepository --> Firestore
LoginRepository --> Firestore

ProfileRepository o-- User
LibraryRepository o-- Book
ExchangeRepository o-- Request
LoginRepository o-- User

@enduml
