@startuml
package Firestore {
}

class User {
    -int id
    -string name
    -string username
    -string phone
    -timestamp createdAt
    +void setId(int id)
    +void setName(string name)
    +void setUsername (string username)
    +void setPhone(string name)
    +void setCreatedAt (timestamp createdAt)
    +int getId()
    +string gettName()
    +string getUsername ()
    +string getPhone()
    +timestamp getCreatedAt ()
}

class Book {
    -int id
    -string title
    -string author
    -string isbn
    -string status
    -Image photo
    -User owner
    -timestamp createdAt
    +void setId(int id)
    +void setTitle(string title)
    +void setAuthor (string author)
    +void setIsbn (string isbn)
    +void setStatus(string status)
    +void setPhoto(Image photo)
    +void setOwner (User owner)
    +void setCreatedAt(timestamp createdAt)
    +int getId ()
    +string getTitle ()
    +string getAuthor ()
    +string getIsbn ()
    +string getStatus ()
    +Image getPhoto ()
    +User getOwner ()
    +timestamp getCreatedAt()
 }

 class Request {
    -int id
    -User requester
    -Book book
    -string state
    -geopoint location
    -timestamp createdAt
    +void setId(int id)
    +void setRequester(User requester)
    +void setBook(Book book)
    +void setState(string state)
    +void setLocation (geopoint location)
    +void setCreatedAt (timestamp createdAt)
    +int getId()
    +User getRequester()
    +Book getBook()
    +string getState()
    +geopoint getLocation()
    +timestamp getCreatedAt()
 }

class LoginActivity {
#void onCreate()
}

class LoginViewModel {
-LoginRepository loginRepository
+LoginViewModel(LoginRepository loginRepository)
}

class LoginRepository {
-FirebaseFirestore  loginRepository
+LiveData<User> getUserData()
+void createUser()
}
class ExchangeActivity{
#void onCreate()
}

class ExchangeViewModel{
-ExchangeRepository exchangeRepository
+ExchangeViewModel(ExchangeRepository exchangeRepository)
+bookRequest()
}

class ExchangeRepository{
-FirebaseFirestore  exchangeRepository
-LiveData<ArrayList<Request>> requestData
+LiveData<ArrayList<Request>> getStoreExchangeData()
+LiveData<ArrayList<Request>> getExchangeData()
+void updateExchangeData()
}

class ProfileActivity {
-ProfileViewModel mProfileViewModel
#void onCreate()
}

class ProfileViewModel {
-ProfileRepository profileRepository
+ProfileViewModel(ProfileRepository profileRepository)
+ProfileViewModel()
+setName(String newName)
+setPhone(String newPhone)
+setEmail(String newEmail)
}

class ProfileRepository {
-FirebaseFirestore  profileRepository
-LiveData<User> userData
+LiveData<User> getStoreProfileData()
+LiveData<User> getProfileData()
+void updateProfile(User profile)
}

class LibraryActivity {
- LibraryViewModel mUnlibraryViewModel
# void onCreate()
}

class LibraryViewModel {
-LibraryRepository libraryRepository
+LibraryViewModel(LibraryRepository libraryRepository)
+ void setTitle(String newTitle)
+ void setDescription(String newDescription)
+ void setISBN(String newISBN)
+ void takePictures()
+ void sendApproval()
+ void sendDecline()
+ perfromBorrowHandoff(Book book)
+ performReturnHandoff(Book book)
}

class LibraryRepository {
-FirebaseFirestore  LibraryRepository
-LiveData<ArrayList<Book>> booksData
+LiveData<ArrayList<Book>> getStoreLibraryData()
+LiveData<ArrayList<Book>> getLibraryData()
+void updateLibrary(Book book)
}

class GoogleMapsFragment{
- GoogleMapAddress mMeetingLocation
}

class GoogleMapService {
}

class BookFragment {
- LiveData<Book> mOpenedBook
- Boolean isEditing
}

class CameraService {
}

class ProfileFragment{
- LiveData<User> mProfile
}

class UnlibraryRepository {
-FirebaseFirestore  UnlibraryRepository
-LiveData<ArrayList<Book>> booksData
+LiveData<ArrayList<Book>> getStoreUnlibraryData()
+LiveData<ArrayList<Book>> getUnlibraryData()
+void updateUnlibrary(Book book)
}

class UnlibraryViewModel {
+ UnlibraryViewModel()
+ void deleteBook(Book toDelete)
+ perfromBorrowHandoff(Book book)
+ performReturnHandoff(Book book)
}

class UnlibraryActivity{
- UnlibraryViewModel mLibraryViewModel
# void onCreate()
+ returnRequest()
}


UnlibraryViewModel o-- UnlibraryRepository
UnlibraryActivity o-- UnlibraryViewModel
UnlibraryActivity o-- BookFragment 


ProfileActivity o-- ProfileViewModel
ProfileViewModel o-- ProfileRepository

BookFragment o-- GoogleMapsFragment
BookFragment o-- CameraService
LibraryViewModel o-- LibraryRepository
LibraryActivity o-- BookFragment
LibraryActivity o-- LibraryViewModel
BookFragment o-- ProfileFragment
GoogleMapsFragment o-- GoogleMapService

ExchangeViewModel --o ExchangeActivity 
ExchangeRepository --o ExchangeViewModel  
BookFragment --o ExchangeActivity 
LoginActivity o-- LoginViewModel
LoginViewModel o-- LoginRepository

ProfileRepository --> Firestore
LibraryRepository --> Firestore
ExchangeRepository --> Firestore
LoginRepository --> Firestore

ProfileRepository o-- User
LibraryRepository o-- Book
ExchangeRepository o-- Request
LoginRepository o-- User

@enduml
BookFragment --o ExchangeActivity
@enduml
